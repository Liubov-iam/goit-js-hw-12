{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42510436-747a3ee758966b4b69f3c3ec4';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (value, currentPage) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error in fetchImages:', error);\n    throw error;\n  }\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst formElem = document.querySelector('.search-form');\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nexport function renderImages(array) {\n  const markup = array\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n          <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n              <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n              </ul>\n            </a>\n          </div>\n        `;\n      }\n    )\n    .join('');\n  \n  gallery.innerHTML = markup;\n  lightbox.refresh();\n  formElem.reset();\n}\n\nexport function renderMoreImages(images) {\n  const hitsArray = images['hits'];\n  const markup = hitsArray\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n          <div class=\"photo-card\">\n            <a href=\"${largeImageURL}\" target=\"_blank\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n              <p><i class=\"img-text\">Likes </i><span>${likes}</span></p>\n              <p><i class=\"img-text\">Views </i><span>${views}</span></p>\n              <p><i class=\"img-text\">Comments </i><span>${comments}</span></p>\n              <p><i class=\"img-text\">Downloads </i><span>${downloads}</span></p>\n            </div>\n          </div>\n        `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n  formElem.reset();\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, renderMoreImages } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loader = document.querySelector('.loader');\nconst loader2 = document.querySelector('.loader2');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst endMessage = document.querySelector('.end-message');\n\nlet currentPage = 1;\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query',\n    });\n    return;\n  }\n\n  try {\n      \n        loader.style.display = 'block';\n        loader2.style.display = 'block';\n    const images = await fetchImages(query, currentPage);\n\n    if (images.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderImages(images.hits);\n      loadMoreBtn.style.display = 'block';\n      endMessage.style.display = 'none';\n\n      loadMoreBtn.addEventListener('click', async () => {\n        try {\n          loader.style.display = 'block';\n          currentPage++;\n          const moreImages = await fetchImages(query, currentPage);\n\n          if (moreImages.hits.length === 0) {\n            iziToast.info({\n              title: 'Info',\n              message: 'No more images to load.',\n            });\n          } else {\n            renderMoreImages(moreImages);\n          }\n        } catch (error) {\n          console.error('Error fetching more images:', error);\n          iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images. Please try again later.',\n          });\n        } finally {\n            \n            loader.style.display = 'none';\n            loader2.style.display = 'none';\n        }\n      });\n\n      if (images.totalHits > currentPage * 15) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        endMessage.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\n\nexport function createGalleryMarkup(images) {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = images\n        .map(\n            (image) => `\n            <div class=\"photo-card\">\n                <a href=\"${image.largeImageURL}\" target=\"_blank\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"info\">\n                    <p><i class=\"img-text\">Likes </i><span>${image.likes}</span></p>\n                    <p><i class=\"img-text\">Views </i><span>${image.views}</span></p>\n                    <p><i class=\"img-text\">Comments </i><span>${image.comments}</span></p>\n                    <p><i class=\"img-text\">Downloads </i><span>${image.downloads}</span></p>\n                </div>\n            </div>\n        `\n        )\n        .join('');\n    const lightbox = new SimpleLightbox('.gallery a', options);\n    lightbox.refresh();\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","value","currentPage","axios","error","gallery","formElem","options","lightbox","SimpleLightbox","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderMoreImages","images","form","input","loader","loader2","loadMoreBtn","endMessage","event","query","iziToast","moreImages"],"mappings":"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"}